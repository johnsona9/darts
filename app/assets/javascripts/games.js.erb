// Place all the behaviors and hooks related to the matching controller here.
// All this logic will automatically be available in application.js.
// You can use CoffeeScript in this file: http://coffeescript.org
$(document).ready(function() {

    handler('player_one_15', 'player_one_15_img', 'player_one_score', 'player_two_15', 15);

    handler('player_one_16', 'player_one_16_img', 'player_one_score', 'player_two_16', 16);

    handler('player_one_17', 'player_one_17_img', 'player_one_score', 'player_two_17', 17);

    handler('player_one_18', 'player_one_18_img', 'player_one_score', 'player_two_18', 18);

    handler('player_one_19', 'player_one_19_img', 'player_one_score', 'player_two_19', 19);

    handler('player_one_20', 'player_one_20_img', 'player_one_score', 'player_two_20', 20);

    handler('player_one_be', 'player_one_be_img', 'player_one_score', 'player_two_be', 25);

    handler('player_two_15', 'player_two_15_img', 'player_two_score', 'player_one_15', 15);

    handler('player_two_16', 'player_two_16_img', 'player_two_score', 'player_one_16', 16);

    handler('player_two_17', 'player_two_17_img', 'player_two_score', 'player_one_17', 17);

    handler('player_two_18', 'player_two_18_img', 'player_two_score', 'player_one_18', 18);

    handler('player_two_19', 'player_two_19_img', 'player_two_score', 'player_one_19', 19);

    handler('player_two_20', 'player_two_20_img', 'player_two_score', 'player_one_20', 20);

    handler('player_two_be', 'player_two_be_img', 'player_two_score', 'player_one_be', 25);
});

handler = function(scorer_target, scorer_image, scorer_score, rerocs_target, points) {
    $('#' + scorer_target).on('click', function() {
        var val = (parseInt($('#' + scorer_target).val(), 10));
        var lav = (parseInt($('#' + rerocs_target).val(), 10));
        if (lav < 3 || val < 3) {
            $('#' + scorer_target).attr('value', (val + 1).toString());
            val += 1;
        }
        if (val > 3 && lav < 3) {
            var score = (parseInt($('#' + scorer_score).text(), 10) + points).toString();
            $('#' + scorer_score).text(function(i, oldtext) {
                return score;
            });
        }
        if (val == 1) {
            $('#' + scorer_image).attr('src', "<%= image_path 'one.png', class: 'image' %>");
        } else if (val == 2) {
            $('#' + scorer_image).attr('src', "<%= image_path 'two.png', class: 'image' %>");
        } else if (val == 3) {
            $('#' + scorer_image).attr('src', "<%= image_path 'three.png', class: 'image' %>");
        }
    });
};
